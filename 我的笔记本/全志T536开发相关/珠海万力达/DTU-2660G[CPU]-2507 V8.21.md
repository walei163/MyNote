# DTU-2660G[CPU]-2507 V8.21调试相关

## 2025-09-29：

### 1、问题1：

> **在高低温实验中，低温-40℃下，关电情况下冷冻2个小时，再上电，个别板卡会出现在spl上电初始化阶段，uboot无法加载eMMC的问题。经过多轮测试，发现有些国产eMMC芯片会出现这个问题。**

经过排查，更换eMMC芯片后，可以解决这个问题，目前将eMMC更换为东芝16GB eMMC芯片。

另，经过研究uboot代码，感觉如果将eMMC和CPU之间的通讯速度降下来，是不是也可以解决这个问题呢？

将低温有问题的3块SWA536核心板，修改uboot代码：

[/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/brandy/brandy-2.0/u-boot-bsp/drivers/mmc/sunxi_mmc_tuning.c](/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/brandy/brandy-2.0/u-boot-bsp/drivers/mmc/sunxi_mmc_tuning.c)

```c
int sunxi_switch_to_best_bus(struct mmc *mmc)
{
	int ret = 0;
	struct sunxi_mmc_priv *priv = mmc->priv;
	int ifreq, imd, freq;
#if 0	
	int sdly = 0, dsdly = 0;
#endif
	int bus_width = 0;

	u32 tm = priv->timing_mode;
	u8 *p = NULL, *pds = NULL;

#if (defined CONFIG_ARCH_SUN8IW6P1) || (defined CONFIG_ARCH_SUN8IW5P1)
	/* don't check and swtich to best bus on sun8iw6
		--smhc0/1: SUNXI_MMC_TIMING_MODE_0
		--smhc2: SUNXI_MMC_TIMING_MODE_1
	*/
	return 0;
#else
	if (IS_SD(mmc) || ((priv->mmc_no == 3))) {
		return 0;
	}
#endif

	MMCDBG("card caps 0x%x\n", mmc->card_caps);

	if (tm == SUNXI_MMC_TIMING_MODE_2) {
		p = &priv->tm2.sdly[0];
		pds = &priv->tm2.dsdly[0];
	} else if (tm == SUNXI_MMC_TIMING_MODE_4) {
		p = &priv->tm4.sdly[0];
		pds = &priv->tm4.dsdly[0];
	} else if (tm == SUNXI_MMC_TIMING_MODE_1) {
		p = &priv->tm1.sdly[0];
	} else if (tm == SUNXI_MMC_TIMING_MODE_5) {
		p = &priv->tm5.sdly[0];
		pds = &priv->tm5.dsdly[0];
	} else {
		MMCINFO("%s: err timing mode %d\n", __FUNCTION__, tm);
		goto OUT;
	}

//RAY.Wang: 2025-09-26
//去掉高速模式
#if 0
	if ((mmc->card_caps & (MMC_MODE_HS400|MMC_MODE_8BIT))
		== (MMC_MODE_HS400|MMC_MODE_8BIT)) {
		imd = HS400;
		if (priv->cfg->tm4_tune_hs400_max_freq)
			ifreq = 5;
		else
			ifreq = 3;
		/*ifreq value 1-25MHz; 2-50MHz; 3-100MHz; 4-150MHz; 5-200MHz*/
		for (; ifreq >= 2; ifreq--) {
			imd = HS200_SDR104;
			sdly = p[imd*MAX_CLK_FREQ_NUM+ifreq];
			imd = HS400;
			dsdly = pds[ifreq];
			if ((sdly != 0xff || tm == SUNXI_MMC_TIMING_MODE_5) && (dsdly != 0xff))
				goto START_SWITCH;
		}
	}
	if (mmc->card_caps & MMC_MODE_HS200) {
		imd = HS200_SDR104;
		if (priv->cfg->tm4_tune_hs200_max_freq)
			ifreq = 5;
		else
			ifreq = 4;
		for (; ifreq >= 4; ifreq--) {
			sdly = p[imd*MAX_CLK_FREQ_NUM+ifreq];
			if (sdly != 0xFF)
				goto START_SWITCH;
		}
	}
	if (mmc->card_caps & MMC_MODE_DDR_52MHz) {
		imd = HSDDR52_DDR50;
		for (ifreq = 2; ifreq >= 2; ifreq--) /*1-25MHz; 2-50MHz; 3-100MHz; 4-150MHz; 5-200MHz*/ {
			sdly = p[imd*MAX_CLK_FREQ_NUM+ifreq];
			if (sdly != 0xFF)
				goto START_SWITCH;
		}
	}
	if (mmc->card_caps & MMC_MODE_HS_52MHz) {
		imd = HSSDR52_SDR25;
		for (ifreq = 2; ifreq >= 1; ifreq--) /*1-25MHz; 2-50MHz; 3-100MHz; 4-150MHz; 5-200MHz*/ {
			sdly = p[imd*MAX_CLK_FREQ_NUM+ifreq];
			if (sdly != 0xFF)
				goto START_SWITCH;
		}
	}
#endif
#if 0
	imd = DS26_SDR12;
	ifreq = CLK_25M;
	bus_width = 4;
	//MMCINFO("use default speed mode: %d-%s, ifreq: %d\n", imd, spd_name[imd], ifreq);
	goto START_SWITCH;
#endif
#if 1	
	imd = HSSDR52_SDR25;
	ifreq = CLK_50M;
	bus_width = 4;
	goto START_SWITCH;
#endif		

	//MMCINFO("don't find best speed mode and freq\n");
	//ret = -1;
	//goto OUT;

START_SWITCH:
	freq = sunxi_select_freq(mmc, imd, ifreq);
	if (freq != 0)
		mmc->tran_speed = freq;
	else {
		MMCINFO("%s: err freq %d-%d\n", __func__, ifreq, freq);
		ret = -1;
		goto OUT;
	}
#if 0
	if (mmc->card_caps & MMC_MODE_8BIT)
		bus_width = 8;
	else if (mmc->card_caps & MMC_MODE_4BIT)
		bus_width = 4;
	else
		bus_width = 1;
#endif

	/* switch to specific speed mode */
	if (imd == DS26_SDR12)
		ret = mmc_mmc_switch_bus_mode(mmc, DS26_SDR12, bus_width);
	else if (imd == HSSDR52_SDR25)
		ret = mmc_mmc_switch_bus_mode(mmc, HSSDR52_SDR25, bus_width);
	else if (imd == HSDDR52_DDR50)
		ret = mmc_mmc_switch_bus_mode(mmc, HSDDR52_DDR50, bus_width);
	else if (imd == HS200_SDR104)
		ret = mmc_mmc_switch_bus_mode(mmc, HS200_SDR104, bus_width);
	else if (imd == HS400) {
		/* firstly, switch to HS-DDR 8 bit */
		ret = mmc_mmc_switch_bus_mode(mmc, HSDDR52_DDR50, bus_width);
		if (ret) {
			MMCINFO("switch to %s fail\n", spd_name[HSDDR52_DDR50]);
			goto OUT;
		}

		/* then, switch to HS400 */
		ret = mmc_mmc_switch_bus_mode(mmc, HS400, bus_width);
	}
	if (ret) {
		MMCINFO("switch to %s fail\n", spd_name[imd]);
		goto OUT;
	}

	mmc->ddr_mode = mmc_is_mode_ddr(new_spd_name[imd]);
	mmc_set_clock(mmc, mmc->tran_speed, false);
	MMCINFO("Best spd md: %d-%s, freq: %d-%d, Bus width: %d\n",
			imd, spd_name[imd], ifreq, freq, bus_width);
OUT:
	return ret;
}
```

去掉高速模式，直接将其固定为：`HSSDR52_SDR25`模式，再重新将这3块板卡做低温实验，问题也能解决。目前看来也是一个解决方案。

**注意：**

**uboot在编译的时候，需要按照以下操作步骤进行：**

1）编译：

```sh
$ ./sanway_build.sh 
Select an option to build:
1. all
2. config
3. kernel
4. kernel_menuconfig
5. kernel_saveconfig
6. bootloader
7. uboot_menuconfig
8. uboot_saveconfig
9. rootfs
10. buildroot_menuconfig
11. buildroot_saveconfig
12. pack
Enter the number of the option: 6

```

2）需要pack：

```sh
$ ./sanway_build.sh 
Select an option to build:
1. all
2. config
3. kernel
4. kernel_menuconfig
5. kernel_saveconfig
6. bootloader
7. uboot_menuconfig
8. uboot_saveconfig
9. rootfs
10. buildroot_menuconfig
11. buildroot_saveconfig
12. pack
Enter the number of the option: 12

```

3）生成的文件：

[/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/out/t536/swa536/pack_out/boot_package.fex](/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/out/t536/swa536/pack_out/boot_package.fex)

### 2、问题2：

> **延续问题1，当更换了东芝的eMMC芯片后，发现通过USB写入系统映像，在操作eMMC时失败。通过TF卡启动，在Linux内核启动过程中，也无法操作eMMC，最终加载eMMC失败。**

怀疑更换的东芝eMMC芯片，在规格上是不是与原来SWA536核心板上的eMMC芯片有不同。仔细研读数据手册，发现我们核心板设计的eMMC供电，IO接口电压和eMMC核心电压均为3.3V。而东芝eMMC芯片要求核心供电为1.8V。将VCC_PC那一路电压改为1.8V，再重新烧写映像，问题解决。

硬件修改方法如图所示：

![image-20250929105855258](/media/sf_D_DRIVE/BaiduNetdiskWorkspace/VNote笔记本_20200401/我的笔记本/全志T536开发相关/珠海万力达/image-20250929105855258.png)

去掉电阻R62，焊接电阻R55，这样就将VCC_PC的电压改为了1.8V供电。

> **不过这样带来了一个新的问题：PC那一路BANK电压整个都被改为了1.8V电压，除了eMMC外，还有SPI0也被改为了1.8V。这样底板上如果用到了SPI0，并且设计为3.3V接口的话，就可能带来问题。**
>
> **另外，3.3V核心电压的eMMC芯片工艺比较老了，很多芯片厂家已经停产，目前市面上更多的是1.8V核心电压的，从未来的选择上，可能还是得选择1.8V核心供电的eMMC芯片。**



---

## 2025-09-14：

本次解决以下几个问题：

> - **万力达钱工反映RTC在掉电重启之后的毫秒精度误差很大；**
> - **万力达李炎意反映型号为pm002的eeprom在有些时候写掉电重启驱动会找不到uid，导致加载失败。**
>

1、经过排查，RTC问题和内核没有关系，而是在文件系统中，打开crond守护进程，会每分钟写一次RTC时间，和钱工的RTC自守时冲突了，需要关闭crond。

2、pm002的驱动代码由万力达石工提供，我这边并没有做过严格测试。我在其代码基础上修改了复位和读UID的代码。复位流程按照文档《PM004MA及PM002MA上下电注意事项V1.1.pdf》中的描述来进行。

文档链接地址：[/media/sf_D_DRIVE/BaiduNetdiskWorkspace/硬件资料/EEPROM/MRAM/矽鹏威电子/MRAM/PM004MA及PM002MA上下电注意事项V1.1.pdf](/media/sf_D_DRIVE/BaiduNetdiskWorkspace/硬件资料/EEPROM/MRAM/矽鹏威电子/MRAM/PM004MA及PM002MA上下电注意事项V1.1.pdf)

修改后的源码地址链接：[/media/sf_D_DRIVE/BaiduNetdiskWorkspace/硬件资料/EEPROM/MRAM/矽鹏威电子/MRAM/2025-09-13我最新修改后的驱动代码/eeprom_pm002.c](/media/sf_D_DRIVE/BaiduNetdiskWorkspace/硬件资料/EEPROM/MRAM/矽鹏威电子/MRAM/2025-09-13我最新修改后的驱动代码/eeprom_pm002.c)

---

## 2025-09-08：

本次修改了以下几个问题：

> 1、增加rpbuf内核配置。
>
> 2、增加pps-gpio内核与DTB配置。
>
> 3、万力达反馈SPI4管脚没有波形，查找到问题。

### 1、增加rpbuf内核配置：

```sh
Allwinner BSP  ---> 
	Device Drivers  ---> 
		Rpbuf drivers  --->
			-*- Rpbuf device interface
			*** Service ***
			<*> Rpmsg-based Rpbuf service driver
			*** Controller ***
			<*> Allwinner Rpbuf controller driver
			*** Sample ***
			<*> Allwinner Rpbuf sample driver
```

然后重新编译内核即可。

### 2、增加pps-gpio内核与DTB配置，并且按照万力达要求，修改了内核代码：

2.1. DTB配置：[/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/device/config/chips/t536/dtbo/zhwld/DTU-2660G-CPU1-2507-V8.20.dts](/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/device/config/chips/t536/dtbo/zhwld/DTU-2660G-CPU1-2507-V8.20.dts)

```c
&{/} {
        pps@0 {
            // pinctrl-names = "default";
            // pinctrl-0 = <&rtc_rx8025_irq_pin>;
            status = "okay";
            compatible = "pps-gpio";		
            gpios = <&pio PB 12 GPIO_ACTIVE_HIGH>;
            // assert-falling-edge;
         };
};	
```



2.2. 内核配置：

```sh
Device Drivers  --->
	<*> PPS support  --->
		--- PPS support
		<*>   PPS client using GPIO
```

2.3. 内核代码修改：

2.3.1. 修改内核头文件：[/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/kernel/linux-5.10-origin/include/linux/pps_kernel.h](/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/kernel/linux-5.10-origin/include/linux/pps_kernel.h)

增加字段定义：

```c
struct pps_device {
    
...
    
//RAY.Wang: 2025-09-08
//按照万力达要求增加
	void *private_data;
};
```

2.3.2. 修改内核源代码：[/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/kernel/linux-5.10-origin/drivers/pps/pps.c](/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/kernel/linux-5.10-origin/drivers/pps/pps.c)

```c
//RAY.Wang: 2025-09-08
//按照万力达要求，增加此处代码。但是这个方案并不完善
typedef int(*call_fun)(void);

static ssize_t pps_read_pin(struct file *file, char __user *buf,
				 size_t nbytes, loff_t *ppos)
{

	
	struct pps_device *pps = file->private_data;
	call_fun get_pin_fun  = pps->private_data;
	char pin_value[10] = {0};
	if(get_pin_fun)
	{
		pin_value[0] = get_pin_fun();
	}

	if(nbytes<10)
	{
		copy_to_user(buf, pin_value, nbytes);
	}

	return nbytes;
}

/*
 * Char device stuff
 */

static const struct file_operations pps_cdev_fops = {
    
    ...
        
	.read		= pps_read_pin,
};
```

2.3.3. 修改内核源代码：[/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/kernel/linux-5.10-origin/drivers/pps/clients/pps-gpio.c](/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/kernel/linux-5.10-origin/drivers/pps/clients/pps-gpio.c)

```c
static int pps_read_pin_value(void)
{
	int pin_value;
	pin_value = gpiod_get_value(g_info->gpio_pin);
	return pin_value;
}


static int pps_gpio_probe(struct platform_device *pdev)
{
    ...
        
    data->pps->private_data = pps_read_pin_value;
}
```

### 3、解决SPI4管脚没有波形输出的问题：

> 问题描述：
>
> DTB设备树已经配置了SPI4，并且管脚配置也是正确的，用到了PB0~PB3，但是操作SPI4设备，没有波形输出。

经过仔细对比，并且咨询了全志研发人员，了解到硬件设计上需要将`JTAG_SEL`接地断开，核心板图纸：

![image-20250908161339581](/media/sf_D_DRIVE/BaiduNetdiskWorkspace/VNote笔记本_20200401/我的笔记本/全志T536开发相关/珠海万力达/image-20250908161339581.png)

否则PB0~PB3将会固定为：1001。

因此，需要将`R14`断开。断开之后，重启系统，再操作SPI4，用示波器就可以看到波形了。

---

## 2025-08-14：

1. 采用外部复位SP706的看门狗时，硬件电路需要修改如下：

![image-20250814142139423](/media/sf_D_DRIVE/BaiduNetdiskWorkspace/VNote笔记本_20200401/我的笔记本/全志T536开发相关/珠海万力达/image-20250814142139423.png)

> **说明：**
>
> **1）不能将SP706的RESET复位输出接到MR_RESET上，否则将会导致系统无法启动。**
>
> **2）系统上电时，由MR_RESET作为系统的复位输出信号。**
>
> **3）当启用看门狗时，一旦WDG_IN管脚没有在1.6S之内进行取反操作，WDO看门狗输出将会输出1ms左右的低电平脉宽，将与MR_RESET连接的二极管负极拉低约1ms，MR_RESET检测到该低电平脉宽后，将会输出约500ms的低电平复位脉宽。**
>
> **4）WDO的输出不能连接SP706复位芯片的第1脚：MR，否则将会导致WDO输出的低电平脉宽由1ms变为90ns左右（也就是低电平脉宽变得太短），而无法驱动MR_RESET变低。根据PMIC芯片AXP717D数据手册说明，MR_RESET至少需要拉低128us才会使得PMIC进入复位状态。**
>
> **4）MR_RESET信号为1.8V TTL电平，在和3.3V信号连接时，需要考虑增加电平转换芯片来进行电平转换。**

2. 进入Linux系统后，有三种方式来对系统装置进行复位操作：

1）直接运行`reboot`命令：

```sh
# reboot
```

此时系统进入`reboot`方式，系统重启。并且`MR_RESET`会输出约500ms左右的低电平脉宽。

2）操作复位芯片`SP706`的`WDI`管脚，使看门狗溢出，复位系统：

```sh
# gpioset 1 200=0
```

上面的命令时将`PG8`直接拉低，等待1.6s之后，看门狗溢出，复位系统。

3）操作PMIC AXP717D的对应寄存器

```sh
# i2cget -f -y 7 0x35 0x27
0x0c
# i2cset -f -y 7 0x35 0x27 0xe
```

关于PMIC芯片AXP717D的系统复位，文档中描述如下：

![image-20250814144051656](/media/sf_D_DRIVE/BaiduNetdiskWorkspace/VNote笔记本_20200401/我的笔记本/全志T536开发相关/珠海万力达/image-20250814144051656.png)

根据上述文档中第（2）条，操作I2C总线，向PMIC寄存器0x27的第1位写1，即可复位PMIC，进而复位T536 CPU。

关于PMIC寄存器0x27的描述如下：

![image-20250814144546120](/media/sf_D_DRIVE/BaiduNetdiskWorkspace/VNote笔记本_20200401/我的笔记本/全志T536开发相关/珠海万力达/image-20250814144546120.png)



---

## 2025-08-13：

1. 在Uboot下增加了Watchdog操作命令：

```sh
sanway> wdt  
wdt - Watchdog sub-system

Usage:
wdt list - list watchdog devices
wdt dev [<name>] - get/set current watchdog device
wdt start <timeout ms> [flags] - start watchdog timer
wdt stop - stop watchdog timer
wdt reset - reset watchdog timer
wdt expire [flags] - expire watchdog timer immediately
```

以及环境变量：

```sh
sanway> print wdt_dev
watchdog@0x02050000L
sanway> print wdt_test
====YTR====wdt_test=wdt dev ${wdt_dev}; sleep 3; wdt expire
sanway> 
```

这样就可以在Uboot下使用看门狗来监控CPU的启动了。我这里将`bootcmd`修改如下：

```sh
sanway> print bootcmd
run dtbo_test && echo "local dtbo success"; run sunxi_pre_cmd boot_normal && echo "local kernel success" || run wdt_test
```

> **注意：**
>
> **以上在Uboot下使用的WDT，采用的是T536 CPU内部自带的WDT，而非是外部SP706复位芯片的看门狗。**

---

2025-08-06：

1、3路以太网已经调通；

2、RTC时钟已经调通；

3、SPI0接口的MRAM(siproin,pm00mina)已经调通；

4、GPIO调试：

4.1.1. 采用Character device (/dev/gpiochipN) support模式调试GPIO。因此需要libgpiod-1.3来配合测试GPIO。

4.1.2. 确认系统中已经加载了gpiochipx设备：

```sh
# ll /dev/gpio*
crw-------    1 root     root      254,   0 Jan  1  1970 /dev/gpiochip0
crw-------    1 root     root      254,   1 Jan  1  1970 /dev/gpiochip1
```

将移植好的libgpiod的库和测试命令上传到板卡，运行：

```sh
# gpioinfo 
gpiochip0 - 64 lines:
        line   0:      unnamed       unused   input  active-high [used]
        line   1:      unnamed       unused   input  active-high [used]
        line   2:      unnamed       unused   input  active-high 
        line   3:      unnamed       unused   input  active-high 
        line   4:      unnamed       unused   input  active-high 
        line   5:      unnamed       unused   input  active-high 
        line   6:      unnamed       unused   input  active-high 
        line   7:      unnamed       unused   input  active-high 
        line   8:      unnamed       unused   input  active-high 
        line   9:      unnamed       unused   input  active-high 
        line  10:      unnamed     "otg_id"   input  active-high [used]
        line  11:      unnamed    "otg_det"   input  active-high [used]
        line  12:      unnamed  "usb0-vbus"  output  active-high [used]
        line  13:      unnamed  "usb1-vbus"  output  active-high [used]
        line  14:      unnamed       unused   input  active-high 
        line  15:      unnamed       unused   input  active-high 
        line  16:      unnamed       unused   input  active-high 
        line  17:      unnamed       unused   input  active-high 
        line  18:      unnamed       unused   input  active-high 
        line  19:      unnamed       unused   input  active-high 
        line  20:      unnamed       unused   input  active-high 
        line  21:      unnamed       unused   input  active-high 
        line  22:      unnamed       unused   input  active-high 
        line  23:      unnamed       unused   input  active-high 
        line  24:      unnamed       unused   input  active-high 
        line  25:      unnamed       unused   input  active-high 
        line  26:      unnamed       unused   input  active-high 
        line  27:      unnamed       unused   input  active-high 
        line  28:      unnamed       unused   input  active-high 
        line  29:      unnamed       unused   input  active-high 
        line  30:      unnamed       unused   input  active-high 
        line  31:      unnamed       unused   input  active-high 
        line  32:      unnamed       unused   input  active-high 
        line  33:      unnamed       unused   input  active-high 
        line  34:      unnamed       unused   input  active-high 
        line  35:      unnamed       unused   input  active-high 
        line  36:      unnamed       unused   input  active-high 
        line  37:      unnamed       unused   input  active-high 
        line  38:      unnamed       unused   input  active-high 
        line  39:      unnamed       unused   input  active-high 
        line  40:      unnamed       unused   input  active-high 
        line  41:      unnamed       unused   input  active-high 
        line  42:      unnamed       unused   input  active-high 
        line  43:      unnamed       unused   input  active-high 
        line  44:      unnamed       unused   input  active-high 
        line  45:      unnamed       unused   input  active-high 
        line  46:      unnamed       unused   input  active-high 
        line  47:      unnamed       unused   input  active-high 
        line  48:      unnamed       unused   input  active-high 
        line  49:      unnamed       unused   input  active-high 
        line  50:      unnamed       unused   input  active-high 
        line  51:      unnamed       unused   input  active-high 
        line  52:      unnamed       unused   input  active-high 
        line  53:      unnamed       unused   input  active-high 
        line  54:      unnamed       unused   input  active-high 
        line  55:      unnamed       unused   input  active-high 
        line  56:      unnamed       unused   input  active-high 
        line  57:      unnamed       unused   input  active-high 
        line  58:      unnamed       unused   input  active-high 
        line  59:      unnamed       unused   input  active-high 
        line  60:      unnamed       unused   input  active-high 
        line  61:      unnamed       unused   input  active-high 
        line  62:      unnamed       unused   input  active-high 
        line  63:      unnamed       unused   input  active-high 
gpiochip1 - 352 lines:
        line   0:      unnamed       unused   input  active-high 
        line   1:      unnamed       unused   input  active-high 
        line   2:      unnamed       unused  output  active-high 
        line   3:      unnamed       unused  output  active-high 
        line   4:      unnamed       unused  output  active-high 
        line   5:      unnamed       unused   input  active-high 
        line   6:      unnamed       unused   input  active-high 
        line   7:      unnamed       unused   input  active-high 
        line   8:      unnamed  "heartbeat"  output  active-high [used]
        line   9:      unnamed "heartbeat1"  output  active-high [used]
        line  10:      unnamed       unused   input  active-high 
        line  11:      unnamed       unused   input  active-high 
        line  12:      unnamed       unused   input  active-high 
        line  13:      unnamed       unused   input  active-high 
        line  14:      unnamed       unused   input  active-high 
        line  15:      unnamed       unused   input  active-high 
        line  16:      unnamed       unused   input  active-high 
        line  17:      unnamed       unused   input  active-high 
        line  18:      unnamed       unused   input  active-high 
        line  19:      unnamed       unused   input  active-high 
        line  20:      unnamed       unused   input  active-high 
        line  21:      unnamed       unused   input  active-high 
        line  22:      unnamed       unused   input  active-high 
        line  23:      unnamed       unused   input  active-high 
        line  24:      unnamed       unused   input  active-high 
        line  25:      unnamed       unused   input  active-high 
        line  26:      unnamed       unused   input  active-high 
        line  27:      unnamed       unused   input  active-high 
        line  28:      unnamed       unused   input  active-high 
        line  29:      unnamed       unused   input  active-high 
        line  30:      unnamed       unused   input  active-high 
        line  31:      unnamed       unused   input  active-high 
        line  32:      unnamed       unused   input  active-high [used]
        line  33:      unnamed       unused   input  active-high [used]
        line  34:      unnamed       unused   input  active-high [used]
        line  35:      unnamed       unused   input  active-high [used]
        line  36:      unnamed       unused   input  active-high [used]
        line  37:      unnamed       unused   input  active-high [used]
        line  38:      unnamed       unused  output  active-high 
        line  39:      unnamed       unused   input  active-high 
        line  40:      unnamed       unused   input  active-high 
        line  41:      unnamed       unused   input  active-high [used]
        line  42:      unnamed       unused   input  active-high [used]
        line  43:      unnamed       unused   input  active-high 
        line  44:      unnamed       unused   input  active-high 
        line  45:      unnamed       unused   input  active-high [used]
        line  46:      unnamed       unused   input  active-high [used]
        line  47:      unnamed       unused   input  active-high 
        line  48:      unnamed       unused   input  active-high 
        line  49:      unnamed       unused   input  active-high 
        line  50:      unnamed       unused   input  active-high 
        line  51:      unnamed       unused   input  active-high 
        line  52:      unnamed       unused   input  active-high 
        line  53:      unnamed       unused   input  active-high 
        line  54:      unnamed       unused   input  active-high 
        line  55:      unnamed       unused   input  active-high 
        line  56:      unnamed       unused   input  active-high 
        line  57:      unnamed       unused   input  active-high 
        line  58:      unnamed       unused   input  active-high 
        line  59:      unnamed       unused   input  active-high 
        line  60:      unnamed       unused   input  active-high 
        line  61:      unnamed       unused   input  active-high 
        line  62:      unnamed       unused   input  active-high 
        line  63:      unnamed       unused   input  active-high 
        line  64:      unnamed       unused   input  active-high [used]
        line  65:      unnamed       unused   input  active-high [used]
        line  66:      unnamed       unused   input  active-high [used]
        line  67:      unnamed       unused   input  active-high [used]
        line  68:      unnamed       unused   input  active-high [used]
        line  69:      unnamed       unused   input  active-high [used]
        line  70:      unnamed       unused   input  active-high [used]
        line  71:      unnamed       unused   input  active-high [used]
        line  72:      unnamed       unused   input  active-high [used]
        line  73:      unnamed       unused   input  active-high [used]
        line  74:      unnamed       unused   input  active-high [used]
        line  75:      unnamed       unused   input  active-high [used]
        line  76:      unnamed       unused   input  active-high [used]
        line  77:      unnamed       unused   input  active-high [used]
        line  78:      unnamed       unused   input  active-high [used]
        line  79:      unnamed       unused   input  active-high [used]
        line  80:      unnamed       unused   input  active-high [used]
        line  81:      unnamed       unused   input  active-high 
        line  82:      unnamed       unused   input  active-high 
        line  83:      unnamed       unused   input  active-high 
        line  84:      unnamed       unused   input  active-high 
        line  85:      unnamed       unused   input  active-high 
        line  86:      unnamed       unused   input  active-high 
        line  87:      unnamed       unused   input  active-high 
        line  88:      unnamed       unused   input  active-high 
        line  89:      unnamed       unused   input  active-high 
        line  90:      unnamed       unused   input  active-high 
        line  91:      unnamed       unused   input  active-high 
        line  92:      unnamed       unused   input  active-high 
        line  93:      unnamed       unused   input  active-high 
        line  94:      unnamed       unused   input  active-high 
        line  95:      unnamed       unused   input  active-high 
        line  96:      unnamed       unused   input  active-high 
        line  97:      unnamed       unused   input  active-high 
        line  98:      unnamed       unused   input  active-high 
        line  99:      unnamed       unused   input  active-high 
        line 100:      unnamed       unused   input  active-high 
        line 101:      unnamed       unused   input  active-high 
        line 102:      unnamed       unused   input  active-high 
        line 103:      unnamed       unused   input  active-high 
        line 104:      unnamed       unused   input  active-high 
        line 105:      unnamed       unused   input  active-high 
        line 106:      unnamed       unused   input  active-high 
        line 107:      unnamed       unused   input  active-high 
        line 108:      unnamed       unused   input  active-high 
        line 109:      unnamed       unused   input  active-high 
        line 110:      unnamed       unused   input  active-high [used]
        line 111:      unnamed       unused   input  active-high [used]
        line 112:      unnamed       unused   input  active-high 
        line 113:      unnamed       unused   input  active-high 
        line 114:      unnamed       unused   input  active-high 
        line 115:      unnamed       unused   input  active-high 
        line 116:      unnamed       unused   input  active-high [used]
        line 117:      unnamed       unused   input  active-high [used]
        line 118:      unnamed       unused   input  active-high 
        line 119:      unnamed       unused   input  active-high 
        line 120:      unnamed       unused   input  active-high 
        line 121:      unnamed       unused   input  active-high 
        line 122:      unnamed       unused   input  active-high 
        line 123:      unnamed       unused   input  active-high 
        line 124:      unnamed       unused   input  active-high 
        line 125:      unnamed       unused   input  active-high 
        line 126:      unnamed       unused   input  active-high 
        line 127:      unnamed       unused   input  active-high 
        line 128:      unnamed       unused   input  active-high 
        line 129:      unnamed       unused   input  active-high 
        line 130:      unnamed       unused   input  active-high 
        line 131:      unnamed       unused   input  active-high 
        line 132:      unnamed       unused   input  active-high 
        line 133:      unnamed       unused   input  active-high 
        line 134:      unnamed       unused   input  active-high 
        line 135:      unnamed       unused   input  active-high 
        line 136:      unnamed       unused   input  active-high 
        line 137:      unnamed       unused   input  active-high 
        line 138:      unnamed       unused   input  active-high 
        line 139:      unnamed       unused   input  active-high 
        line 140:      unnamed       unused   input  active-high 
        line 141:      unnamed       unused   input  active-high 
        line 142:      unnamed       unused   input  active-high 
        line 143:      unnamed       unused   input  active-high 
        line 144:      unnamed       unused   input  active-high 
        line 145:      unnamed       unused   input  active-high 
        line 146:      unnamed       unused   input  active-high 
        line 147:      unnamed       unused   input  active-high 
        line 148:      unnamed       unused   input  active-high 
        line 149:      unnamed       unused   input  active-high 
        line 150:      unnamed       unused   input  active-high 
        line 151:      unnamed       unused   input  active-high 
        line 152:      unnamed       unused   input  active-high 
        line 153:      unnamed       unused   input  active-high 
        line 154:      unnamed       unused   input  active-high 
        line 155:      unnamed       unused   input  active-high 
        line 156:      unnamed       unused   input  active-high 
        line 157:      unnamed       unused   input  active-high 
        line 158:      unnamed       unused   input  active-high 
        line 159:      unnamed       unused   input  active-high 
        line 160:      unnamed       unused   input  active-high [used]
        line 161:      unnamed       unused   input  active-high [used]
        line 162:      unnamed       unused   input  active-high [used]
        line 163:      unnamed       unused   input  active-high [used]
        line 164:      unnamed       unused   input  active-high [used]
        line 165:      unnamed       unused   input  active-high [used]
        line 166:      unnamed         "cd"   input   active-low [used]
        line 167:      unnamed       unused   input  active-high 
        line 168:      unnamed       unused   input  active-high 
        line 169:      unnamed       unused   input  active-high 
        line 170:      unnamed       unused   input  active-high 
        line 171:      unnamed       unused   input  active-high 
        line 172:      unnamed       unused   input  active-high 
        line 173:      unnamed       unused   input  active-high 
        line 174:      unnamed       unused   input  active-high 
        line 175:      unnamed       unused   input  active-high 
        line 176:      unnamed       unused   input  active-high 
        line 177:      unnamed       unused   input  active-high 
        line 178:      unnamed       unused   input  active-high 
        line 179:      unnamed       unused   input  active-high 
        line 180:      unnamed       unused   input  active-high 
        line 181:      unnamed       unused   input  active-high 
        line 182:      unnamed       unused   input  active-high 
        line 183:      unnamed       unused   input  active-high 
        line 184:      unnamed       unused   input  active-high 
        line 185:      unnamed       unused   input  active-high 
        line 186:      unnamed       unused   input  active-high 
        line 187:      unnamed       unused   input  active-high 
        line 188:      unnamed       unused   input  active-high 
        line 189:      unnamed       unused   input  active-high 
        line 190:      unnamed       unused   input  active-high 
        line 191:      unnamed       unused   input  active-high 
        line 192:      unnamed       unused   input  active-high [used]
        line 193:      unnamed       unused   input  active-high [used]
        line 194:      unnamed       unused   input  active-high 
        line 195:      unnamed       unused   input  active-high 
        line 196:      unnamed       unused   input  active-high 
        line 197:      unnamed       unused   input  active-high 
        line 198:      unnamed       unused   input  active-high [used]
        line 199:      unnamed       unused   input  active-high [used]
        line 200:      unnamed       unused   input  active-high 
        line 201:      unnamed       unused   input  active-high 
        line 202:      unnamed       unused   input  active-high [used]
        line 203:      unnamed       unused   input  active-high [used]
        line 204:      unnamed       unused   input  active-high 
        line 205:      unnamed       unused   input  active-high 
        line 206:      unnamed       unused   input  active-high 
        line 207:      unnamed       unused   input  active-high 
        line 208:      unnamed       unused   input  active-high 
        line 209:      unnamed       unused   input  active-high 
        line 210:      unnamed       unused   input  active-high 
        line 211:      unnamed       unused   input  active-high 
        line 212:      unnamed       unused   input  active-high 
        line 213:      unnamed       unused   input  active-high 
        line 214:      unnamed       unused   input  active-high 
        line 215:      unnamed       unused   input  active-high 
        line 216:      unnamed       unused   input  active-high 
        line 217:      unnamed       unused   input  active-high 
        line 218:      unnamed       unused   input  active-high 
        line 219:      unnamed       unused   input  active-high 
        line 220:      unnamed       unused   input  active-high 
        line 221:      unnamed       unused   input  active-high 
        line 222:      unnamed       unused   input  active-high 
        line 223:      unnamed       unused   input  active-high 
        line 224:      unnamed       unused   input  active-high [used]
        line 225:      unnamed       unused   input  active-high [used]
        line 226:      unnamed       unused   input  active-high [used]
        line 227:      unnamed       unused   input  active-high [used]
        line 228:      unnamed       unused   input  active-high [used]
        line 229:      unnamed       unused   input  active-high [used]
        line 230:      unnamed       unused   input  active-high [used]
        line 231:      unnamed       unused   input  active-high [used]
        line 232:      unnamed       unused   input  active-high 
        line 233:      unnamed       unused   input  active-high 
        line 234:      unnamed       unused   input  active-high 
        line 235:      unnamed       unused   input  active-high 
        line 236:      unnamed       unused   input  active-high 
        line 237:      unnamed       unused   input  active-high 
        line 238:      unnamed       unused   input  active-high 
        line 239:      unnamed       unused   input  active-high 
        line 240:      unnamed       unused   input  active-high 
        line 241:      unnamed       unused   input  active-high 
        line 242:      unnamed       unused   input  active-high 
        line 243:      unnamed       unused   input  active-high 
        line 244:      unnamed       unused   input  active-high 
        line 245:      unnamed       unused   input  active-high 
        line 246:      unnamed       unused   input  active-high 
        line 247:      unnamed       unused   input  active-high 
        line 248:      unnamed       unused   input  active-high 
        line 249:      unnamed       unused   input  active-high 
        line 250:      unnamed       unused   input  active-high 
        line 251:      unnamed       unused   input  active-high 
        line 252:      unnamed       unused   input  active-high 
        line 253:      unnamed       unused   input  active-high 
        line 254:      unnamed       unused   input  active-high 
        line 255:      unnamed       unused   input  active-high 
        line 256:      unnamed       unused   input  active-high 
        line 257:      unnamed       unused   input  active-high 
        line 258:      unnamed       unused   input  active-high 
        line 259:      unnamed       unused   input  active-high 
        line 260:      unnamed       unused   input  active-high 
        line 261:      unnamed       unused   input  active-high 
        line 262:      unnamed       unused   input  active-high 
        line 263:      unnamed       unused   input  active-high 
        line 264:      unnamed       unused   input  active-high 
        line 265:      unnamed       unused   input  active-high 
        line 266:      unnamed       unused   input  active-high 
        line 267:      unnamed       unused   input  active-high 
        line 268:      unnamed       unused   input  active-high 
        line 269:      unnamed       unused   input  active-high 
        line 270:      unnamed       unused   input  active-high 
        line 271:      unnamed       unused   input  active-high 
        line 272:      unnamed       unused   input  active-high 
        line 273:      unnamed       unused   input  active-high 
        line 274:      unnamed       unused   input  active-high 
        line 275:      unnamed       unused   input  active-high 
        line 276:      unnamed       unused   input  active-high 
        line 277:      unnamed       unused   input  active-high 
        line 278:      unnamed       unused   input  active-high 
        line 279:      unnamed       unused   input  active-high 
        line 280:      unnamed       unused   input  active-high 
        line 281:      unnamed       unused   input  active-high 
        line 282:      unnamed       unused   input  active-high 
        line 283:      unnamed       unused   input  active-high 
        line 284:      unnamed       unused   input  active-high 
        line 285:      unnamed       unused   input  active-high 
        line 286:      unnamed       unused   input  active-high 
        line 287:      unnamed       unused   input  active-high 
        line 288:      unnamed       unused   input  active-high [used]
        line 289:      unnamed       unused   input  active-high [used]
        line 290:      unnamed       unused   input  active-high [used]
        line 291:      unnamed       unused   input  active-high 
        line 292:      unnamed       unused   input  active-high [used]
        line 293:      unnamed       unused   input  active-high [used]
        line 294:      unnamed       unused   input  active-high [used]
        line 295:      unnamed       unused   input  active-high [used]
        line 296:      unnamed       unused   input  active-high [used]
        line 297:      unnamed       unused   input  active-high [used]
        line 298:      unnamed       unused   input  active-high 
        line 299:      unnamed       unused   input  active-high 
        line 300:      unnamed  "PHY reset"  output   active-low [used]
        line 301:      unnamed       unused   input  active-high 
        line 302:      unnamed       unused   input  active-high 
        line 303:      unnamed       unused   input  active-high 
        line 304:      unnamed       unused   input  active-high [used]
        line 305:      unnamed       unused   input  active-high [used]
        line 306:      unnamed       unused   input  active-high [used]
        line 307:      unnamed       unused   input  active-high 
        line 308:      unnamed       unused   input  active-high [used]
        line 309:      unnamed       unused   input  active-high [used]
        line 310:      unnamed       unused   input  active-high [used]
        line 311:      unnamed       unused   input  active-high [used]
        line 312:      unnamed       unused   input  active-high [used]
        line 313:      unnamed       unused   input  active-high [used]
        line 314:      unnamed  "PHY reset"  output   active-low [used]
        line 315:      unnamed       unused   input  active-high 
        line 316:      unnamed       unused   input  active-high 
        line 317:      unnamed       unused   input  active-high 
        line 318:      unnamed       unused   input  active-high 
        line 319:      unnamed       unused   input  active-high 
        line 320:      unnamed       unused   input  active-high 
        line 321:      unnamed       unused   input  active-high 
        line 322:      unnamed       unused   input  active-high 
        line 323:      unnamed       unused   input  active-high 
        line 324:      unnamed       unused   input  active-high 
        line 325:      unnamed       unused   input  active-high 
        line 326:      unnamed       unused   input  active-high 
        line 327:      unnamed       unused   input  active-high 
        line 328:      unnamed       unused   input  active-high 
        line 329:      unnamed       unused   input  active-high 
        line 330:      unnamed       unused   input  active-high 
        line 331:      unnamed       unused   input  active-high 
        line 332:      unnamed       unused   input  active-high 
        line 333:      unnamed       unused   input  active-high 
        line 334:      unnamed       unused   input  active-high 
        line 335:      unnamed       unused   input  active-high 
        line 336:      unnamed       unused   input  active-high 
        line 337:      unnamed       unused   input  active-high 
        line 338:      unnamed       unused   input  active-high 
        line 339:      unnamed       unused   input  active-high 
        line 340:      unnamed       unused   input  active-high 
        line 341:      unnamed       unused   input  active-high 
        line 342:      unnamed       unused   input  active-high 
        line 343:      unnamed       unused   input  active-high 
        line 344:      unnamed       unused   input  active-high 
        line 345:      unnamed       unused   input  active-high 
        line 346:      unnamed       unused   input  active-high 
        line 347:      unnamed       unused   input  active-high 
        line 348:      unnamed       unused   input  active-high 
        line 349:      unnamed       unused   input  active-high 
        line 350:      unnamed       unused   input  active-high 
        line 351:      unnamed       unused   input  active-high 
# 
```

注意！

**gpiochip1：对应PIO，包含PA~PK，**

**gpiochip0：对应r_PIO，包含PL、PM、PN**

而line编号见头文件： [/media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/kernel/linux-5.10-origin/bsp/include/sunxi-gpio.h]( /media/jason/btrfs_disk_M/Develop/allwinner/t536/V1.1/kernel/linux-5.10-origin/bsp/include/sunxi-gpio.h)，其内容定义如下：

```c
#define SUNXI_PINCTRL	"pio"
#define SUNXI_R_PINCTRL	"r_pio"
#include <linux/pinctrl/pinconf-generic.h>

/* pin group base number name space,
 * the max pin number : 26*32=832.
 */
#define SUNXI_BANK_SIZE 32
#define SUNXI_PA_BASE	0
#define SUNXI_PB_BASE	32
#define SUNXI_PC_BASE	64
#define SUNXI_PD_BASE	96
#define SUNXI_PE_BASE	128
#define SUNXI_PF_BASE	160
#define SUNXI_PG_BASE	192
#define SUNXI_PH_BASE	224
#define SUNXI_PI_BASE	256
#define SUNXI_PJ_BASE	288
#define SUNXI_PK_BASE	320
#define SUNXI_PL_BASE	352
#define SUNXI_PM_BASE	384
#define SUNXI_PN_BASE	416
#define SUNXI_PO_BASE	448
#define AXP_PIN_BASE	1024

#define SUNXI_PIN_NAME_MAX_LEN	8

/* sunxi gpio name space */
#define GPIOA(n)	(SUNXI_PA_BASE + (n))
#define GPIOB(n)	(SUNXI_PB_BASE + (n))
#define GPIOC(n)	(SUNXI_PC_BASE + (n))
#define GPIOD(n)	(SUNXI_PD_BASE + (n))
#define GPIOE(n)	(SUNXI_PE_BASE + (n))
#define GPIOF(n)	(SUNXI_PF_BASE + (n))
#define GPIOG(n)	(SUNXI_PG_BASE + (n))
#define GPIOH(n)	(SUNXI_PH_BASE + (n))
#define GPIOI(n)	(SUNXI_PI_BASE + (n))
#define GPIOJ(n)	(SUNXI_PJ_BASE + (n))
#define GPIOK(n)	(SUNXI_PK_BASE + (n))
#define GPIOL(n)	(SUNXI_PL_BASE + (n))
#define GPIOM(n)	(SUNXI_PM_BASE + (n))
#define GPION(n)	(SUNXI_PN_BASE + (n))
#define GPIOO(n)	(SUNXI_PO_BASE + (n))
#define GPIO_AXP(n)	(AXP_PIN_BASE  + (n))

/* sunxi specific input/output/eint functions */
#define SUNXI_PIN_INPUT_FUNC	(0)
#define SUNXI_PIN_OUTPUT_FUNC	(1)
#define SUNXI_PIN_EINT_FUNC	(6)
#define SUNXI_PIN_IO_DISABLE	(7)
```

举例说明：

```sh
PA8 = SUNXI_PA_BASE(0) + 8 = 8，对应管脚PA8，定义为：led-trigger0，内核心跳指示灯。
```

又比如：

```sh
PF6 = SUNXI_PF_BASE(160) + 6 = 166, 对应管脚PF6，定义为：SD_nCD，TF卡插入检测脚。
```

可以通过挂在debugfs之后，直接查询pinmux的定义：

```sh
cat /sys/kernel/debug/pinctrl/3604000.pinctrl/pinmux-pins
```

显示结果为（3604000.pinctrl对应PIO，也就是gpiochip1）：

```sh
Pinmux settings per pin
Format: pin (name): mux_owner|gpio_owner (strict) hog?
pin 0 (PA0): UNCLAIMED
pin 1 (PA1): UNCLAIMED
pin 2 (PA2): UNCLAIMED
pin 3 (PA3): UNCLAIMED
pin 4 (PA4): UNCLAIMED
pin 5 (PA5): UNCLAIMED
pin 6 (PA6): UNCLAIMED
pin 7 (PA7): UNCLAIMED
pin 8 (PA8): GPIO 3604000.pinctrl:8
pin 9 (PA9): GPIO 3604000.pinctrl:9
pin 32 (PB0): device 4029000.spi function spi4 group PB0
pin 33 (PB1): device 4029000.spi function spi4 group PB1
pin 34 (PB2): device 4029000.spi function spi4 group PB2
pin 35 (PB3): device 4029000.spi function spi4 group PB3
pin 36 (PB4): device 2608000.uart function uart8 group PB4
pin 37 (PB5): device 2608000.uart function uart8 group PB5
pin 38 (PB6): UNCLAIMED
pin 39 (PB7): UNCLAIMED
pin 40 (PB8): UNCLAIMED
pin 41 (PB9): device 2600000.uart function uart0 group PB9
pin 42 (PB10): device 2600000.uart function uart0 group PB10
pin 43 (PB11): UNCLAIMED
pin 44 (PB12): UNCLAIMED
pin 45 (PB13): device 2607000.uart function uart7 group PB13
pin 46 (PB14): device 2607000.uart function uart7 group PB14
pin 64 (PC0): device 4022000.sdmmc function sdc2 group PC0
pin 65 (PC1): device 4022000.sdmmc function sdc2 group PC1
pin 66 (PC2): device 4025000.spi function spi0 group PC2
pin 67 (PC3): device 4025000.spi function spi0 group PC3
pin 68 (PC4): device 4025000.spi function spi0 group PC4
pin 69 (PC5): device 4022000.sdmmc function sdc2 group PC5
pin 70 (PC6): device 4022000.sdmmc function sdc2 group PC6
pin 71 (PC7): device 4025000.spi function spi0 group PC7
pin 72 (PC8): device 4022000.sdmmc function sdc2 group PC8
pin 73 (PC9): device 4022000.sdmmc function sdc2 group PC9
pin 74 (PC10): device 4022000.sdmmc function sdc2 group PC10
pin 75 (PC11): device 4022000.sdmmc function sdc2 group PC11
pin 76 (PC12): device 4025000.spi function spi0 group PC12
pin 77 (PC13): device 4022000.sdmmc function sdc2 group PC13
pin 78 (PC14): device 4022000.sdmmc function sdc2 group PC14
pin 79 (PC15): device 4022000.sdmmc function sdc2 group PC15
pin 80 (PC16): device 4022000.sdmmc function sdc2 group PC16
pin 96 (PD0): UNCLAIMED
pin 97 (PD1): UNCLAIMED
pin 98 (PD2): UNCLAIMED
pin 99 (PD3): UNCLAIMED
pin 100 (PD4): UNCLAIMED
pin 101 (PD5): UNCLAIMED
pin 102 (PD6): UNCLAIMED
pin 103 (PD7): UNCLAIMED
pin 104 (PD8): UNCLAIMED
pin 105 (PD9): UNCLAIMED
pin 106 (PD10): UNCLAIMED
pin 107 (PD11): UNCLAIMED
pin 108 (PD12): UNCLAIMED
pin 109 (PD13): UNCLAIMED
pin 110 (PD14): device 2603000.uart function uart3 group PD14
pin 111 (PD15): device 2603000.uart function uart3 group PD15
pin 112 (PD16): UNCLAIMED
pin 113 (PD17): UNCLAIMED
pin 114 (PD18): UNCLAIMED
pin 115 (PD19): UNCLAIMED
pin 116 (PD20): device 2602000.uart function uart2 group PD20
pin 117 (PD21): device 2602000.uart function uart2 group PD21
pin 118 (PD22): UNCLAIMED
pin 119 (PD23): UNCLAIMED
pin 128 (PE0): UNCLAIMED
pin 129 (PE1): UNCLAIMED
pin 130 (PE2): UNCLAIMED
pin 131 (PE3): UNCLAIMED
pin 132 (PE4): UNCLAIMED
pin 133 (PE5): UNCLAIMED
pin 134 (PE6): UNCLAIMED
pin 135 (PE7): UNCLAIMED
pin 136 (PE8): UNCLAIMED
pin 137 (PE9): UNCLAIMED
pin 138 (PE10): UNCLAIMED
pin 139 (PE11): UNCLAIMED
pin 140 (PE12): UNCLAIMED
pin 141 (PE13): UNCLAIMED
pin 142 (PE14): UNCLAIMED
pin 143 (PE15): UNCLAIMED
pin 144 (PE16): UNCLAIMED
pin 145 (PE17): UNCLAIMED
pin 160 (PF0): device 4020000.sdmmc function sdc0 group PF0
pin 161 (PF1): device 4020000.sdmmc function sdc0 group PF1
pin 162 (PF2): device 4020000.sdmmc function sdc0 group PF2
pin 163 (PF3): device 4020000.sdmmc function sdc0 group PF3
pin 164 (PF4): device 4020000.sdmmc function sdc0 group PF4
pin 165 (PF5): device 4020000.sdmmc function sdc0 group PF5
pin 166 (PF6): GPIO 3604000.pinctrl:166
pin 192 (PG0): device 260d000.uart function uart13 group PG0
pin 193 (PG1): device 260d000.uart function uart13 group PG1
pin 194 (PG2): UNCLAIMED
pin 195 (PG3): UNCLAIMED
pin 196 (PG4): UNCLAIMED
pin 197 (PG5): UNCLAIMED
pin 198 (PG6): device 2601000.uart function uart1 group PG6
pin 199 (PG7): device 2601000.uart function uart1 group PG7
pin 200 (PG8): UNCLAIMED
pin 201 (PG9): UNCLAIMED
pin 202 (PG10): device 260e000.uart function uart14 group PG10
pin 203 (PG11): device 260e000.uart function uart14 group PG11
pin 204 (PG12): UNCLAIMED
pin 205 (PG13): UNCLAIMED
pin 206 (PG14): UNCLAIMED
pin 224 (PH0): device 2510000.twi function gpio_in group PH0
pin 225 (PH1): device 2510000.twi function gpio_in group PH1
pin 226 (PH2): device 2511000.twi function gpio_in group PH2
pin 227 (PH3): device 2511000.twi function gpio_in group PH3
pin 228 (PH4): device 4028000.spi function spi3 group PH4
pin 229 (PH5): device 4028000.spi function spi3 group PH5
pin 230 (PH6): device 4028000.spi function spi3 group PH6
pin 231 (PH7): device 4028000.spi function spi3 group PH7
pin 232 (PH8): UNCLAIMED
pin 233 (PH9): UNCLAIMED
pin 234 (PH10): UNCLAIMED
pin 235 (PH11): UNCLAIMED
pin 236 (PH12): UNCLAIMED
pin 237 (PH13): UNCLAIMED
pin 238 (PH14): UNCLAIMED
pin 239 (PH15): UNCLAIMED
pin 256 (PI0): UNCLAIMED
pin 257 (PI1): UNCLAIMED
pin 258 (PI2): UNCLAIMED
pin 259 (PI3): UNCLAIMED
pin 260 (PI4): UNCLAIMED
pin 261 (PI5): UNCLAIMED
pin 262 (PI6): UNCLAIMED
pin 263 (PI7): UNCLAIMED
pin 264 (PI8): UNCLAIMED
pin 265 (PI9): UNCLAIMED
pin 266 (PI10): UNCLAIMED
pin 267 (PI11): UNCLAIMED
pin 268 (PI12): UNCLAIMED
pin 269 (PI13): UNCLAIMED
pin 270 (PI14): UNCLAIMED
pin 271 (PI15): UNCLAIMED
pin 272 (PI16): UNCLAIMED
pin 288 (PJ0): device 4500000.ethernet function rgmii0 group PJ0
pin 289 (PJ1): device 4500000.ethernet function rgmii0 group PJ1
pin 290 (PJ2): device 4500000.ethernet function rgmii0 group PJ2
pin 291 (PJ3): UNCLAIMED
pin 292 (PJ4): device 4500000.ethernet function rgmii0 group PJ4
pin 293 (PJ5): device 4500000.ethernet function rgmii0 group PJ5
pin 294 (PJ6): device 4500000.ethernet function rgmii0 group PJ6
pin 295 (PJ7): device 4500000.ethernet function rgmii0 group PJ7
pin 296 (PJ8): device 4500000.ethernet function rgmii0 group PJ8
pin 297 (PJ9): device 4500000.ethernet function rgmii0 group PJ9
pin 298 (PJ10): UNCLAIMED
pin 299 (PJ11): UNCLAIMED
pin 300 (PJ12): GPIO 3604000.pinctrl:300
pin 301 (PJ13): UNCLAIMED
pin 302 (PJ14): UNCLAIMED
pin 303 (PJ15): UNCLAIMED
pin 304 (PJ16): device 4510000.ethernet function rgmii1 group PJ16
pin 305 (PJ17): device 4510000.ethernet function rgmii1 group PJ17
pin 306 (PJ18): device 4510000.ethernet function rgmii1 group PJ18
pin 307 (PJ19): UNCLAIMED
pin 308 (PJ20): device 4510000.ethernet function rgmii1 group PJ20
pin 309 (PJ21): device 4510000.ethernet function rgmii1 group PJ21
pin 310 (PJ22): device 4510000.ethernet function rgmii1 group PJ22
pin 311 (PJ23): device 4510000.ethernet function rgmii1 group PJ23
pin 312 (PJ24): device 4510000.ethernet function rgmii1 group PJ24
pin 313 (PJ25): device 4510000.ethernet function rgmii1 group PJ25
pin 314 (PJ26): GPIO 3604000.pinctrl:314
pin 315 (PJ27): UNCLAIMED
pin 316 (PJ28): UNCLAIMED
pin 317 (PJ29): UNCLAIMED
pin 318 (PJ30): UNCLAIMED
pin 319 (PJ31): UNCLAIMED
pin 320 (PK0): UNCLAIMED
pin 321 (PK1): UNCLAIMED
pin 322 (PK2): UNCLAIMED
pin 323 (PK3): UNCLAIMED
pin 324 (PK4): UNCLAIMED
pin 325 (PK5): UNCLAIMED
pin 326 (PK6): UNCLAIMED
pin 327 (PK7): UNCLAIMED
pin 328 (PK8): UNCLAIMED
pin 329 (PK9): UNCLAIMED
pin 330 (PK10): UNCLAIMED
pin 331 (PK11): UNCLAIMED
pin 332 (PK12): UNCLAIMED
pin 333 (PK13): UNCLAIMED
pin 334 (PK14): UNCLAIMED
pin 335 (PK15): UNCLAIMED
pin 336 (PK16): UNCLAIMED
pin 337 (PK17): UNCLAIMED
pin 338 (PK18): UNCLAIMED
pin 339 (PK19): UNCLAIMED
pin 340 (PK20): UNCLAIMED
pin 341 (PK21): UNCLAIMED
pin 342 (PK22): UNCLAIMED
pin 343 (PK23): UNCLAIMED
```

同理可以查看r_PIO的定义（7096000）：

```sh
cat /sys/kernel/debug/pinctrl/7096000.pinctrl/pinmux-pins
```

```sh
Pinmux settings per pin
Format: pin (name): mux_owner|gpio_owner (strict) hog?
pin 352 (PL0): device 7083000.twi function s_twi0 group PL0
pin 353 (PL1): device 7083000.twi function s_twi0 group PL1
pin 354 (PL2): UNCLAIMED
pin 355 (PL3): UNCLAIMED
pin 356 (PL4): UNCLAIMED
pin 357 (PL5): UNCLAIMED
pin 358 (PL6): UNCLAIMED
pin 359 (PL7): UNCLAIMED
pin 360 (PL8): UNCLAIMED
pin 361 (PL9): UNCLAIMED
pin 362 (PL10): GPIO 7096000.pinctrl:362
pin 363 (PL11): GPIO 7096000.pinctrl:363
pin 364 (PL12): GPIO 7096000.pinctrl:364
pin 365 (PL13): GPIO 7096000.pinctrl:365
pin 384 (PM0): UNCLAIMED
pin 385 (PM1): UNCLAIMED
pin 386 (PM2): UNCLAIMED
pin 387 (PM3): UNCLAIMED
pin 388 (PM4): UNCLAIMED
pin 389 (PM5): UNCLAIMED
```

如果想要查找具体某个GPIO管脚对应的编号，可以直接采用下面的命令，比如想要查找`PI10`的编号定义：

```sh
cat /sys/kernel/debug/pinctrl/3604000.pinctrl/pinmux-pins |grep PI10
pin 266 (PI10): UNCLAIMED
```



4.1.3. 由于万力达设计中用到了GPIO来控制3.3V电源输出，在启动Linux内核之前，需要在U-boot下将`PI10`拉高。

而在U-boot下，有gpio的操作命令，

```sh
gpio s 266
```

> s表示set，266对应PI10，也就是将PI10设置为1。

如果设置为0，则为：

```sh
gpio c 266
```

> c表示为clear。

因此，可以直接在bootcmd中添加：

```sh
setenv bootcmd 'gpio s 266; run dtbo_test; run sunxi_pre_cmd boot_normal'